{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["// import axios\nimport axios from 'axios';\n\n// add key to headers\naxios.defaults.headers.common['x-api-key'] =\n  'live_SpY3U6UyCgy2bjzR7DbU0oLAhvNCZywFRPbwHdfvxbdcdP5NnP0R6vdYHdS1yx2N';\n\n//\nasync function fetchBreeds() {\n  const URL_BREEDS = 'https://api.thecatapi.com/v1/breeds';\n\n  return await axios.get(URL_BREEDS).then(resp => {\n    if (!resp.data) {\n      throw new Error();\n    }\n    return resp.data;\n  });\n}\n\nasync function fetchCatByBreed(breedId) {\n  const URL_IMAGES = 'https://api.thecatapi.com/v1/images';\n  const SEARCH_BREED_ID = 'search?breed_ids';\n\n  return await axios\n    .get(`${URL_IMAGES}/${SEARCH_BREED_ID}=${breedId}`)\n    .then(resp => {\n      if (!resp.data) {\n        throw new Error();\n      }\n      return resp.data;\n    });\n}\n\n//\nexport { fetchBreeds, fetchCatByBreed };\n","// import functions that get data from api\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\n// get elements\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n  catInfo: document.querySelector('.cat-info'),\n};\n\n// state\nlet isLoading = true;\n//   hide error message\nrefs.error.classList.add('hide');\n// hide select\nrefs.select.classList.add('hide');\n\n// add event listener\nrefs.select.addEventListener('change', handlerSelect);\n\n// on change event render api data about the cat's breed choosen from selected options\nfunction handlerSelect(e) {\n  //   e.preventDefault();\n  // show loader message\n  isLoading && loaderHandler();\n  // clear cat info\n  refs.catInfo.innerHTML = '';\n\n  fetchCatByBreed(e.currentTarget.value).then(data => {\n    // // show loader message\n    // show loader message\n    isLoading && loaderHandler();\n\n    if (!data) {\n      //   hide loader message\n      isLoading = false;\n      // show text about error\n      errorHandler();\n      throw new Error();\n    }\n\n    //   hide loader message\n    hideLoaderErrorShowBreedInfo();\n    // render the cat info\n    refs.catInfo.insertAdjacentHTML('beforeend', createMarkupBreedInfo(data));\n  });\n\n  console.log(e.target.value);\n}\n\n// add options (with cat names from api) to select\nfetchBreeds()\n  .then(data => {\n    isLoading = true;\n    loaderHandler();\n    if (!data) {\n      isLoading = false;\n      errorHandler();\n    }\n    // hide loader message\n    hideLoaderErrorShowBreedInfo();\n    //   add breeds options to select\n    refs.select.insertAdjacentHTML('beforeend', createMarkupOptions(data));\n    // // show select\n    // refs.select.classList.remove('hide');\n  })\n  .catch(err => {\n    console.log(err);\n    errorHandler();\n  });\n\n// fill select options\nfunction createMarkupOptions(data) {\n  return data\n    .map(item => `<option value=${item.id}>${item.name}</option>`)\n    .join('');\n}\n\n//  create info about the breed\nfunction createMarkupBreedInfo(data) {\n  const { url } = data[0];\n  const { description, name, temperament } = data[0].breeds[0];\n  //\n\n  return `<h2>${name}</h2>\n    <img src=\"${url}\" alt=\"${name}\" width=\"300\" />    \n    <p>${description}</p>\n    <h3>Temperament: ${temperament}</h3> `;\n}\n\n// when loading\nfunction loaderHandler() {\n  // hide select\n  refs.select.classList.add('hide');\n  // hide catInfo\n  refs.catInfo.classList.add('hide');\n  // show loader message\n  refs.loader.classList.remove('hide');\n}\n\n// when error\nfunction errorHandler() {\n  // hide loader message\n  refs.loader.classList.add('hide');\n  // show error message\n  refs.error.classList.remove('hide');\n}\n\n// when get info from api\nfunction hideLoaderErrorShowBreedInfo() {\n  // hide loader message\n  refs.loader.classList.add('hide');\n  //   hide error message\n  refs.error.classList.add('hide');\n  // show select and catInfo\n  refs.catInfo.classList.remove('hide');\n  refs.select.classList.remove('hide');\n}\n"],"names":["axios","fetchBreeds","URL_BREEDS","resp","fetchCatByBreed","breedId","URL_IMAGES","SEARCH_BREED_ID","refs","isLoading","handlerSelect","loaderHandler","data","errorHandler","hideLoaderErrorShowBreedInfo","createMarkupBreedInfo","createMarkupOptions","err","item","url","description","name","temperament"],"mappings":"svBAIAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAGF,eAAeC,GAAc,CAC3B,MAAMC,EAAa,sCAEnB,OAAO,MAAMF,EAAM,IAAIE,CAAU,EAAE,KAAKC,GAAQ,CAC9C,GAAI,CAACA,EAAK,KACR,MAAM,IAAI,MAEZ,OAAOA,EAAK,IAChB,CAAG,CACH,CAEA,eAAeC,EAAgBC,EAAS,CACtC,MAAMC,EAAa,sCACbC,EAAkB,mBAExB,OAAO,MAAMP,EACV,IAAI,GAAGM,KAAcC,KAAmBF,GAAS,EACjD,KAAKF,GAAQ,CACZ,GAAI,CAACA,EAAK,KACR,MAAM,IAAI,MAEZ,OAAOA,EAAK,IAClB,CAAK,CACL,CC3BA,MAAMK,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,QAAS,SAAS,cAAc,WAAW,CAC7C,EAGA,IAAIC,EAAY,GAEhBD,EAAK,MAAM,UAAU,IAAI,MAAM,EAE/BA,EAAK,OAAO,UAAU,IAAI,MAAM,EAGhCA,EAAK,OAAO,iBAAiB,SAAUE,CAAa,EAGpD,SAASA,EAAc,EAAG,CAGxBD,GAAaE,EAAa,EAE1BH,EAAK,QAAQ,UAAY,GAEzBJ,EAAgB,EAAE,cAAc,KAAK,EAAE,KAAKQ,GAAQ,CAKlD,GAFAH,GAAaE,EAAa,EAEtB,CAACC,EAEH,MAAAH,EAAY,GAEZI,IACM,IAAI,MAIZC,IAEAN,EAAK,QAAQ,mBAAmB,YAAaO,EAAsBH,CAAI,CAAC,CAC5E,CAAG,EAED,QAAQ,IAAI,EAAE,OAAO,KAAK,CAC5B,CAGAX,EAAa,EACV,KAAKW,GAAQ,CACZH,EAAY,GACZE,IACKC,IACHH,EAAY,GACZI,KAGFC,IAEAN,EAAK,OAAO,mBAAmB,YAAaQ,EAAoBJ,CAAI,CAAC,CAGzE,CAAG,EACA,MAAMK,GAAO,CACZ,QAAQ,IAAIA,CAAG,EACfJ,GACJ,CAAG,EAGH,SAASG,EAAoBJ,EAAM,CACjC,OAAOA,EACJ,IAAIM,GAAQ,iBAAiBA,EAAK,MAAMA,EAAK,eAAe,EAC5D,KAAK,EAAE,CACZ,CAGA,SAASH,EAAsBH,EAAM,CACnC,KAAM,CAAE,IAAAO,CAAG,EAAKP,EAAK,GACf,CAAE,YAAAQ,EAAa,KAAAC,EAAM,YAAAC,CAAa,EAAGV,EAAK,GAAG,OAAO,GAG1D,MAAO,OAAOS;AAAA,gBACAF,WAAaE;AAAA,SACpBD;AAAA,uBACcE,SACvB,CAGA,SAASX,GAAgB,CAEvBH,EAAK,OAAO,UAAU,IAAI,MAAM,EAEhCA,EAAK,QAAQ,UAAU,IAAI,MAAM,EAEjCA,EAAK,OAAO,UAAU,OAAO,MAAM,CACrC,CAGA,SAASK,GAAe,CAEtBL,EAAK,OAAO,UAAU,IAAI,MAAM,EAEhCA,EAAK,MAAM,UAAU,OAAO,MAAM,CACpC,CAGA,SAASM,GAA+B,CAEtCN,EAAK,OAAO,UAAU,IAAI,MAAM,EAEhCA,EAAK,MAAM,UAAU,IAAI,MAAM,EAE/BA,EAAK,QAAQ,UAAU,OAAO,MAAM,EACpCA,EAAK,OAAO,UAAU,OAAO,MAAM,CACrC"}