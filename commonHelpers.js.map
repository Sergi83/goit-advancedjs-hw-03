{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["// import axios\nimport axios from 'axios';\n\n// add key to headers\naxios.defaults.headers.common['x-api-key'] =\n  'live_SpY3U6UyCgy2bjzR7DbU0oLAhvNCZywFRPbwHdfvxbdcdP5NnP0R6vdYHdS1yx2N';\n\n//\nasync function fetchBreeds() {\n  const URL_BREEDS = 'https://api.thecatapi.com/v1/breeds';\n\n  return await axios.get(URL_BREEDS).then(resp => {\n    if (!resp.data) {\n      throw new Error();\n    }\n    return resp.data;\n  });\n}\n\nasync function fetchCatByBreed(breedId) {\n  const URL_IMAGES = 'https://api.thecatapi.com/v1/images';\n  const SEARCH_BREED_ID = 'search?breed_ids';\n\n  return await axios\n    .get(`${URL_IMAGES}/${SEARCH_BREED_ID}=${breedId}`)\n    .then(resp => {\n      if (!resp.data) {\n        throw new Error();\n      }\n      return resp.data;\n    });\n}\n\n//\nexport { fetchBreeds, fetchCatByBreed };\n","// import functions that get data from api\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\n// get elements\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n  catInfo: document.querySelector('.cat-info'),\n};\n\nrefs.error.style.visibility = 'hidden';\n\n// add event listener\nrefs.select.addEventListener('change', handlerSelect);\n\n// on change event render api data about the cat's breed choosen from selected options\nfunction handlerSelect(e) {\n  e.preventDefault();\n  refs.catInfo.innerHTML = '';\n\n  fetchCatByBreed(e.currentTarget.value).then(data => {\n    if (!data) {\n      // show text about error\n      refs.error.style.visibility = 'visible';\n      throw new Error();\n    }\n    // render the cat info\n    refs.catInfo.insertAdjacentHTML('beforeend', createMarkupBreedInfo(data));\n  });\n\n  console.log(e.target.value);\n}\n\n// add options (with cat names from api) to select\nfetchBreeds()\n  .then(data => {\n    refs.select.insertAdjacentHTML('beforeend', createMarkupOptions(data));\n  })\n  .catch(err => console.log(err));\n\n// fill select options\nfunction createMarkupOptions(data) {\n  return data\n    .map(item => `<option value=${item.id}>${item.name}</option>`)\n    .join('');\n}\n\n//  create info about the breed\nfunction createMarkupBreedInfo(data) {\n  const { url } = data[0];\n  const { description, name, temperament } = data[0].breeds[0];\n  //\n\n  return `<h2>${name}</h2>\n    <img src=\"${url}\" alt=\"${name}\" width=\"300\" />    \n    <p>${description}</p>\n    <h3>Temperament: ${temperament}</h3> `;\n}\n"],"names":["axios","fetchBreeds","URL_BREEDS","resp","fetchCatByBreed","breedId","URL_IMAGES","SEARCH_BREED_ID","refs","handlerSelect","data","createMarkupBreedInfo","createMarkupOptions","err","item","url","description","name","temperament"],"mappings":"svBAIAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAGF,eAAeC,GAAc,CAC3B,MAAMC,EAAa,sCAEnB,OAAO,MAAMF,EAAM,IAAIE,CAAU,EAAE,KAAKC,GAAQ,CAC9C,GAAI,CAACA,EAAK,KACR,MAAM,IAAI,MAEZ,OAAOA,EAAK,IAChB,CAAG,CACH,CAEA,eAAeC,EAAgBC,EAAS,CACtC,MAAMC,EAAa,sCACbC,EAAkB,mBAExB,OAAO,MAAMP,EACV,IAAI,GAAGM,KAAcC,KAAmBF,GAAS,EACjD,KAAKF,GAAQ,CACZ,GAAI,CAACA,EAAK,KACR,MAAM,IAAI,MAEZ,OAAOA,EAAK,IAClB,CAAK,CACL,CC3BA,MAAMK,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,QAAS,SAAS,cAAc,WAAW,CAC7C,EAEAA,EAAK,MAAM,MAAM,WAAa,SAG9BA,EAAK,OAAO,iBAAiB,SAAUC,CAAa,EAGpD,SAASA,EAAc,EAAG,CACxB,EAAE,eAAc,EAChBD,EAAK,QAAQ,UAAY,GAEzBJ,EAAgB,EAAE,cAAc,KAAK,EAAE,KAAKM,GAAQ,CAClD,GAAI,CAACA,EAEH,MAAAF,EAAK,MAAM,MAAM,WAAa,UACxB,IAAI,MAGZA,EAAK,QAAQ,mBAAmB,YAAaG,EAAsBD,CAAI,CAAC,CAC5E,CAAG,EAED,QAAQ,IAAI,EAAE,OAAO,KAAK,CAC5B,CAGAT,EAAa,EACV,KAAKS,GAAQ,CACZF,EAAK,OAAO,mBAAmB,YAAaI,EAAoBF,CAAI,CAAC,CACzE,CAAG,EACA,MAAMG,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAGhC,SAASD,EAAoBF,EAAM,CACjC,OAAOA,EACJ,IAAII,GAAQ,iBAAiBA,EAAK,MAAMA,EAAK,eAAe,EAC5D,KAAK,EAAE,CACZ,CAGA,SAASH,EAAsBD,EAAM,CACnC,KAAM,CAAE,IAAAK,CAAG,EAAKL,EAAK,GACf,CAAE,YAAAM,EAAa,KAAAC,EAAM,YAAAC,CAAa,EAAGR,EAAK,GAAG,OAAO,GAG1D,MAAO,OAAOO;AAAA,gBACAF,WAAaE;AAAA,SACpBD;AAAA,uBACcE,SACvB"}